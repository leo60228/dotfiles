#!/bin/sh
exec mosquitto_rr -t cmnd/tasmota/"$1" -e stat/tasmota/RESULT -m "$2" | jq '[paths(scalars) as $path | { ($path|join(".")): getpath($path) }] | add | to_entries | map([.key, .value])[] | @tsv' -r | column -t $'-s\t'
